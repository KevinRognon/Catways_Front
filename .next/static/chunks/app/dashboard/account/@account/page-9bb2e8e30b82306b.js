(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[588],{4335:function(e,t,a){Promise.resolve().then(a.bind(a,2623))},2623:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var c=a(7437),n=a(6463),s=a(2265),r=a(6042),i=a(8472),l=a(2649);function o(e){let{title:t,onAbort:a,title_patch:o,type:u,id:d}=e,[h,p]=(0,s.useState)(""),[f,x]=(0,s.useState)("");(0,n.useRouter)(),(0,s.useEffect)(()=>{x(o)},[]);let m=async e=>{e.preventDefault();try{let e=await i.Z.patch("".concat("https://catways-api.onrender.com","/users/").concat(d,"/update"),{[f]:h});l.Z.remove("user"),await l.Z.set("user",JSON.stringify(e.data.user),{expires:.5}),window.location.reload()}catch(e){console.log(e)}};return(0,c.jsx)("div",{onClick:a,className:"absolute top-0 left-0 z-10 w-dvw h-dvh bg-black bg-opacity-70 flex justify-center items-center",children:(0,c.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:"flex flex-col items-center z-20 text-black bg-cyan-100 w-fit h-fit p-5 rounded-md",children:[(0,c.jsxs)("p",{className:"text-lg font-bold",children:["Modification: ",t]}),(0,c.jsx)("div",{className:"flex gap-2 mt-4",children:(0,c.jsxs)("form",{onSubmit:m,className:"flex flex-col gap-2",children:[(0,c.jsx)("input",{onChange:e=>{p(e.target.value)},className:"p-1 rounded-3xl shadow-lg pl-5",placeholder:t,type:u}),(0,c.jsx)(r.Z,{onClick:m,text:"Modifier"})]})})]})})}var u=a(5646);function d(e){let{title:t,option:a,icon:n,type:r,id:i,title_patch:l}=e,[d,h]=(0,s.useState)(!1);return(0,c.jsxs)(c.Fragment,{children:[(0,c.jsxs)("li",{onClick:()=>{"creation"!=l&&h(!0)},className:"flex flex-col relative bg-white w-full md:w-60 h-fit p-5 shadow-md hover:shadow-xl hover:transition-all hover:cursor-pointer duration-200",children:[(0,c.jsx)(u.Z,{color:"bg-blue-700"}),(0,c.jsxs)("div",{className:"flex justify-between",children:[(0,c.jsx)("p",{className:"font-bold text-xl",children:t}),n]}),(0,c.jsx)("p",{className:"text-gray-700",children:a})]}),d&&(0,c.jsx)(o,{title_patch:l,id:i,type:r,onAbort:()=>{h(!1)},title:t})]})}var h=a(7975),p=a(7979);function f(e){let{title:t,text:a,onClick:n,onSuccessUpload:l}=e,{user:o}=(0,p.a)(),[u,d]=(0,s.useState)(null),h=async e=>{e.preventDefault();let t=new FormData;t.append("file",u),t.append("userId",o._id);try{let e=await i.Z.post("".concat("https://catways-api.onrender.com","/files"),t,{headers:{"Content-Type":"multipart/form-data"}});if(201===e.status){let t=e.data.path;t.startsWith("/")||(t="/".concat(t)),t=t.replace(/\\/g,"/"),await i.Z.patch("".concat("https://catways-api.onrender.com","/users/").concat(o._id,"/update"),{avatar:"".concat("https://catways-api.onrender.com").concat(t)}),l()}}catch(e){console.error(e)}};return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{onClick:n,className:"absolute top-0 left-0 z-10 w-dvw h-dvh bg-black bg-opacity-70 flex justify-center items-center",children:(0,c.jsx)("div",{onClick:e=>{e.stopPropagation()},id:"modalFile",className:"flex items-center justify-center text-black bg-neutral-300 w-fit h-fit p-2 rounded-md",children:(0,c.jsx)("form",{onSubmit:h,className:"p-5",children:(0,c.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,c.jsx)("input",{onChange:e=>{d(e.target.files[0])},type:"file",name:"file"}),(0,c.jsx)(r.Z,{onClick:onsubmit,text:"Uploader"})]})})})})})}function x(e,t,a){l.Z.remove(e),l.Z.set(e,JSON.stringify(t),{expires:a})}var m=(0,h.Z)(function(){let{user:e}=(0,p.a)();(0,n.useRouter)();let[t,a]=(0,s.useState)(!1),[r,l]=(0,s.useState)(null);if((0,s.useEffect)(()=>{e&&l(e.avatar)},[e]),!e)return(0,c.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,c.jsx)("p",{className:"text-xl",children:"Vous n'\xeates pas connect\xe9."})});let o=()=>{a(!t)},h=async()=>{o(),x("user",(await i.Z.get("".concat("https://catways-api.onrender.com","/users/").concat(e._id))).data,.5),l(e.avatar)},m=async()=>{console.log("Suppression de l'avatar");try{let t=await i.Z.patch("".concat("https://catways-api.onrender.com","/users/").concat(e._id,"/update"),{avatar:""});console.log(t.data),l(null),x("user",t.data.user,.5)}catch(e){console.error(e)}};return(0,c.jsxs)(c.Fragment,{children:[t&&(0,c.jsx)(f,{onSuccessUpload:h,onClick:o,title:"Upload",text:"Test"}),(0,c.jsxs)("div",{className:"grid lg:grid-cols-3 gap-20 lg:place-items-center",children:[(0,c.jsxs)("div",{className:"flex flex-col gap-5 items-center justify-start",children:[r?(0,c.jsxs)("div",{className:"relative rounded-full hover:cursor-pointer",children:[(0,c.jsx)("img",{className:"w-40 h-40 rounded-full",src:r,alt:"avatar_".concat(e.name)}),(0,c.jsx)("svg",{onClick:m,xmlns:"http://www.w3.org/2000/svg",className:"absolute bottom-0 right-0 hover:cursor-pointer",width:"30",height:"30",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{fill:"red",fillRule:"evenodd",d:"M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14m4-7a.75.75 0 0 0-.75-.75h-6.5a.75.75 0 0 0 0 1.5h6.5A.75.75 0 0 0 12 8",clipRule:"evenodd"})})]}):(0,c.jsxs)("div",{className:"relative bg-gray-700 p-10 rounded-full",children:[(0,c.jsxs)("svg",{onClick:o,className:"absolute bottom-0 right-0 hover:cursor-pointer",xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 48 48",children:[(0,c.jsx)("circle",{cx:"24",cy:"24",r:"21",fill:"#4CAF50"}),(0,c.jsxs)("g",{fill:"#fff",children:[(0,c.jsx)("path",{d:"M21 14h6v20h-6z"}),(0,c.jsx)("path",{d:"M14 21h20v6H14z"})]})]}),(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"80",height:"80",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{fill:"white",d:"M16 7.992C16 3.58 12.416 0 8 0S0 3.58 0 7.992c0 2.43 1.104 4.62 2.832 6.09c.016.016.032.016.032.032c.144.112.288.224.448.336c.08.048.144.111.224.175A7.98 7.98 0 0 0 8.016 16a7.98 7.98 0 0 0 4.48-1.375c.08-.048.144-.111.224-.16c.144-.111.304-.223.448-.335c.016-.016.032-.016.032-.032c1.696-1.487 2.8-3.676 2.8-6.106zm-8 7.001c-1.504 0-2.88-.48-4.016-1.279c.016-.128.048-.255.08-.383a4.17 4.17 0 0 1 .416-.991c.176-.304.384-.576.64-.816c.24-.24.528-.463.816-.639c.304-.176.624-.304.976-.4A4.15 4.15 0 0 1 8 10.342a4.185 4.185 0 0 1 2.928 1.166c.368.368.656.8.864 1.295c.112.288.192.592.24.911A7.03 7.03 0 0 1 8 14.993zm-2.448-7.4a2.49 2.49 0 0 1-.208-1.024c0-.351.064-.703.208-1.023c.144-.32.336-.607.576-.847c.24-.24.528-.431.848-.575c.32-.144.672-.208 1.024-.208c.368 0 .704.064 1.024.208c.32.144.608.336.848.575c.24.24.432.528.576.847c.144.32.208.672.208 1.023c0 .368-.064.704-.208 1.023a2.84 2.84 0 0 1-.576.848a2.84 2.84 0 0 1-.848.575a2.715 2.715 0 0 1-2.064 0a2.84 2.84 0 0 1-.848-.575a2.526 2.526 0 0 1-.56-.848zm7.424 5.306c0-.032-.016-.048-.016-.08a5.22 5.22 0 0 0-.688-1.406a4.883 4.883 0 0 0-1.088-1.135a5.207 5.207 0 0 0-1.04-.608a2.82 2.82 0 0 0 .464-.383a4.2 4.2 0 0 0 .624-.784a3.624 3.624 0 0 0 .528-1.934a3.71 3.71 0 0 0-.288-1.47a3.799 3.799 0 0 0-.816-1.199a3.845 3.845 0 0 0-1.2-.8a3.72 3.72 0 0 0-1.472-.287a3.72 3.72 0 0 0-1.472.288a3.631 3.631 0 0 0-1.2.815a3.84 3.84 0 0 0-.8 1.199a3.71 3.71 0 0 0-.288 1.47c0 .352.048.688.144 1.007c.096.336.224.64.4.927c.16.288.384.544.624.784c.144.144.304.271.48.383a5.12 5.12 0 0 0-1.04.624c-.416.32-.784.703-1.088 1.119a4.999 4.999 0 0 0-.688 1.406c-.016.032-.016.064-.016.08C1.776 11.636.992 9.91.992 7.992C.992 4.14 4.144.991 8 .991s7.008 3.149 7.008 7.001a6.96 6.96 0 0 1-2.032 4.907z"})})]}),(0,c.jsxs)("div",{children:[(0,c.jsx)("p",{className:"text-black font-bold text-2xl",children:e.name}),(0,c.jsx)("p",{className:"text-gray-500 underline",children:e.email})]})]}),(0,c.jsxs)("div",{className:"flex flex-col gap-5 lg:col-span-2",children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h2",{className:"pl-2 relative text-3xl font-bold font-",children:["Informations personnelles",(0,c.jsx)(u.Z,{color:"bg-blue-700"}),(0,c.jsx)("p",{className:"text-gray-700 text-sm",children:"Modifiez vos informations personnelles"})]})}),(0,c.jsxs)("ul",{className:"grid grid-cols-2 lg:grid-cols-2 gap-5 place-items-center",children:[(0,c.jsx)(d,{title_patch:"name",id:e.id,type:"text",title:"Nom",option:e.name,icon:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 16 16",children:(0,c.jsx)("path",{fill:"blue",d:"M16 7.992C16 3.58 12.416 0 8 0S0 3.58 0 7.992c0 2.43 1.104 4.62 2.832 6.09c.016.016.032.016.032.032c.144.112.288.224.448.336c.08.048.144.111.224.175A7.98 7.98 0 0 0 8.016 16a7.98 7.98 0 0 0 4.48-1.375c.08-.048.144-.111.224-.16c.144-.111.304-.223.448-.335c.016-.016.032-.016.032-.032c1.696-1.487 2.8-3.676 2.8-6.106zm-8 7.001c-1.504 0-2.88-.48-4.016-1.279c.016-.128.048-.255.08-.383a4.17 4.17 0 0 1 .416-.991c.176-.304.384-.576.64-.816c.24-.24.528-.463.816-.639c.304-.176.624-.304.976-.4A4.15 4.15 0 0 1 8 10.342a4.185 4.185 0 0 1 2.928 1.166c.368.368.656.8.864 1.295c.112.288.192.592.24.911A7.03 7.03 0 0 1 8 14.993zm-2.448-7.4a2.49 2.49 0 0 1-.208-1.024c0-.351.064-.703.208-1.023c.144-.32.336-.607.576-.847c.24-.24.528-.431.848-.575c.32-.144.672-.208 1.024-.208c.368 0 .704.064 1.024.208c.32.144.608.336.848.575c.24.24.432.528.576.847c.144.32.208.672.208 1.023c0 .368-.064.704-.208 1.023a2.84 2.84 0 0 1-.576.848a2.84 2.84 0 0 1-.848.575a2.715 2.715 0 0 1-2.064 0a2.84 2.84 0 0 1-.848-.575a2.526 2.526 0 0 1-.56-.848zm7.424 5.306c0-.032-.016-.048-.016-.08a5.22 5.22 0 0 0-.688-1.406a4.883 4.883 0 0 0-1.088-1.135a5.207 5.207 0 0 0-1.04-.608a2.82 2.82 0 0 0 .464-.383a4.2 4.2 0 0 0 .624-.784a3.624 3.624 0 0 0 .528-1.934a3.71 3.71 0 0 0-.288-1.47a3.799 3.799 0 0 0-.816-1.199a3.845 3.845 0 0 0-1.2-.8a3.72 3.72 0 0 0-1.472-.287a3.72 3.72 0 0 0-1.472.288a3.631 3.631 0 0 0-1.2.815a3.84 3.84 0 0 0-.8 1.199a3.71 3.71 0 0 0-.288 1.47c0 .352.048.688.144 1.007c.096.336.224.64.4.927c.16.288.384.544.624.784c.144.144.304.271.48.383a5.12 5.12 0 0 0-1.04.624c-.416.32-.784.703-1.088 1.119a4.999 4.999 0 0 0-.688 1.406c-.016.032-.016.064-.016.08C1.776 11.636.992 9.91.992 7.992C.992 4.14 4.144.991 8 .991s7.008 3.149 7.008 7.001a6.96 6.96 0 0 1-2.032 4.907z"})})}),(0,c.jsx)(d,{title_patch:"email",id:e.id,type:"email",title:"Email",option:e.email,icon:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 512 512",children:(0,c.jsx)("path",{fill:"blue",d:"M0 262q0 43 24.5 81T90 405q-2 7-4.5 18t-7 34.5t-3.5 39T85 512q30 0 60.5-16t48.5-32t19-16q55 0 107-21q-6-2-22.5-12T277 405h-64q-18 0-38 20q-28 25-53 36l6-77l-17-15q-68-44-68-107q0-16 6-36q-4-6-5.5-18.5T42 185v-23l1-13Q0 195 0 262zM299 0q-89 0-151.5 52T85 177q0 72 62 118t152 46q1 0 20.5 21.5t51.5 43t62 21.5q7 0 8.5-11t-1.5-26.5t-7-31.5t-7-27l-4-11q41-25 65.5-62.5T512 177q0-73-62.5-125T299 0zm102 284l-28 17l11 32q2 5 5 17t6 19q-22-15-52-45q-23-25-42-25q-70 0-120.5-32.5T130 177q-1-56 48.5-95T299 43t120.5 39t49.5 95q0 63-68 107z"})})}),(0,c.jsx)(d,{title_patch:"password",id:e.id,type:"password",title:"Password",option:"********",icon:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 26 26",children:(0,c.jsx)("path",{fill:"blue",d:"M17.625.188c-1.678 0-3.242.68-4.531 1.968C11.63 3.62 10.96 5.42 11.156 7.344c.147 1.428.799 2.868 1.844 4.156l-7.25 7.25l-1.313-1.313c-.64-.643-1.171-.11-1.812.532L2 18.625c-.642.639-1.172 1.14-.531 1.781L2.78 21.72l-1.03 1.03a1.63 1.63 0 0 0 0 2.313c.64.639 1.671.639 2.313 0l11.375-11.375c1.232.772 2.57 1.187 3.874 1.187c1.677 0 3.244-.68 4.532-1.969c1.465-1.463 2.134-3.263 1.937-5.187c-.176-1.731-1.095-3.473-2.562-4.938C21.557 1.117 19.572.187 17.625.187zm.063 2.062c1.393 0 2.84.713 4.093 1.969c1.114 1.11 1.809 2.402 1.938 3.656c.133 1.304-.326 2.546-1.344 3.563c-.912.91-1.975 1.374-3.125 1.374c-1.394 0-2.838-.714-4.094-1.968c-1.113-1.113-1.808-2.402-1.937-3.656c-.132-1.304.325-2.545 1.344-3.563c.912-.91 1.975-1.375 3.124-1.375z"})})}),(0,c.jsx)(d,{title_patch:"creation",id:e.id,type:"",title:"Cr\xe9ation",option:new Date(e.created).toLocaleString(),icon:(0,c.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",children:(0,c.jsx)("path",{fill:"none",stroke:"blue",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M3 12c0-4.243 0-5.364 1.318-6.682C5.636 4 7.758 4 12 4c4.243 0 6.364 0 7.682 1.318C21 6.636 21 7.758 21 12c0 4.243 0 6.364-1.318 7.682C18.364 21 16.242 21 12 21c-4.243 0-6.364 0-7.682-1.318C3 18.364 3 16.242 3 12Zm13.5-7V3m-9 2V3M3.25 8h17.5"})})})]})]})]})]})})},6042:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var c=a(7437);function n(e){let{onClick:t,text:a}=e;return(0,c.jsx)("button",{onClick:t,className:"bg-blue-700 text-white px-4 rounded-full py-2 hover:bg-blue-600",children:a})}a(2265)},5646:function(e,t,a){"use strict";a.d(t,{Z:function(){return n}});var c=a(7437);function n(e){let{color:t}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsx)("div",{className:"absolute ".concat(t," left-0 top-0 w-1 h-full")})})}},7975:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var c=a(7437),n=a(2265),s=a(6463),r=a(2649),i=a(8472);function l(e){return t=>{let a=(0,s.useRouter)(),l=(0,s.usePathname)();return(0,n.useEffect)(()=>{let e=r.Z.get("token"),t=r.Z.get("user");e&&t?(i.Z.defaults.headers.common.Authorization="".concat(e),"/"===l&&a.replace("/dashboard")):a.replace("/")},[a]),(0,c.jsx)(e,{...t})}}},7979:function(e,t,a){"use strict";a.d(t,{UserProvider:function(){return i},a:function(){return l}});var c=a(7437),n=a(2265),s=a(2649);let r=(0,n.createContext)(),i=e=>{let{children:t}=e,[a,i]=(0,n.useState)(null);return(0,n.useEffect)(()=>{let e=s.Z.get("user");e&&i(JSON.parse(e))},[]),(0,c.jsx)(r.Provider,{value:{user:a,setUser:i},children:t})},l=()=>(0,n.useContext)(r)},6463:function(e,t,a){"use strict";var c=a(1169);a.o(c,"useParams")&&a.d(t,{useParams:function(){return c.useParams}}),a.o(c,"usePathname")&&a.d(t,{usePathname:function(){return c.usePathname}}),a.o(c,"useRouter")&&a.d(t,{useRouter:function(){return c.useRouter}})},2649:function(e,t,a){"use strict";/*! js-cookie v3.0.5 | MIT */function c(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var c in a)e[c]=a[c]}return e}a.d(t,{Z:function(){return n}});var n=function e(t,a){function n(e,n,s){if("undefined"!=typeof document){"number"==typeof(s=c({},a,s)).expires&&(s.expires=new Date(Date.now()+864e5*s.expires)),s.expires&&(s.expires=s.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var i in s)s[i]&&(r+="; "+i,!0!==s[i]&&(r+="="+s[i].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+r}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var a=document.cookie?document.cookie.split("; "):[],c={},n=0;n<a.length;n++){var s=a[n].split("="),r=s.slice(1).join("=");try{var i=decodeURIComponent(s[0]);if(c[i]=t.read(r,i),e===i)break}catch(e){}}return e?c[e]:c}},remove:function(e,t){n(e,"",c({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,c({},this.attributes,t))},withConverter:function(t){return e(c({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(a)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"})}},function(e){e.O(0,[472,971,23,744],function(){return e(e.s=4335)}),_N_E=e.O()}]);